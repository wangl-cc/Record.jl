<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · RecordedArrays.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RecordedArrays.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Manual</a><ul class="internal"><li><a class="tocitem" href="#Define-a-Clock"><span>Define a <code>Clock</code></span></a></li><li><a class="tocitem" href="#Entry-type"><span>Entry type</span></a></li><li><a class="tocitem" href="#Recorded-variable"><span>Recorded variable</span></a></li><li><a class="tocitem" href="#Accessing-changes"><span>Accessing changes</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li></ul></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/wangl-cc/RecordedArrays.jl/blob/master/docs/src/manual.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Manual"><a class="docs-heading-anchor" href="#Manual">Manual</a><a id="Manual-1"></a><a class="docs-heading-anchor-permalink" href="#Manual" title="Permalink"></a></h1><h2 id="Define-a-Clock"><a class="docs-heading-anchor" href="#Define-a-Clock">Define a <code>Clock</code></a><a id="Define-a-Clock-1"></a><a class="docs-heading-anchor-permalink" href="#Define-a-Clock" title="Permalink"></a></h2><p>To record changes of recorded variables automatically, those variables must refer to the time variable of model, in this package which called as a &quot;Clock&quot;.</p><p>There are different types of clocks:</p><ul><li><a href="../references/#RecordedArrays.ContinuousClock"><code>ContinuousClock</code></a> for continuous-time process,</li><li>and <a href="../references/#RecordedArrays.DiscreteClock"><code>DiscreteClock</code></a> for discrete-time process.</li></ul><p>A clock can be created like:</p><pre><code class="language-julia hljs">c = ContinuousClock(10.0)</code></pre><p>which create a <code>ContinuousClock</code> start at <code>t=0</code> and end at <code>t=10</code>.</p><p>The current time of clock is accessed by <a href="../references/#RecordedArrays.currenttime"><code>currenttime</code></a>. Obviously, the current time of clock will change at each epoch. For <code>DiscreteClock</code>, the time will update automatically during iteration, more about iteration, see below. For <code>ContinuousClock</code>, the time must be update manually by <a href="../references/#RecordedArrays.increase!"><code>increase!</code></a>.</p><p>Clocks can be iterated, for example, iterating a <code>ContinuousClock</code>:</p><pre><code class="language-julia hljs">for epoch in c
    # do something calculating the time step τ
    increase!(c, τ)
    # do something mutating states
end</code></pre><p>which is equivalent to</p><pre><code class="language-julia hljs">t = 0.0
epoch = 0
while t &lt;= 10.0
    global epoch
    epoch += 1
    # do something calculating the time step τ
    t += τ
    # do something mutating states
end</code></pre><p>Iterate clocks by <code>for</code> loop is recommended, and any operations on recorded variable should be avoided out of loop. During the iteration, some states of <code>Clock</code> were updated automatically, and if iteration finished when reach to end, <code>Clock</code> will be initialized by <a href="../references/#RecordedArrays.init!"><code>init!</code></a> automatically. Besides, iteration is the only way to update the current time of <code>DiscreteClock</code>.</p><h2 id="Entry-type"><a class="docs-heading-anchor" href="#Entry-type">Entry type</a><a id="Entry-type-1"></a><a class="docs-heading-anchor-permalink" href="#Entry-type" title="Permalink"></a></h2><p>In this package, an entry stores changes of a single variable, a number or an element of an array. There are two types of entries:</p><ul><li><a href="../references/#RecordedArrays.DynamicEntry"><code>DynamicEntry</code></a> for variable which represents a &quot;state&quot; changing overtime,</li><li><a href="../references/#RecordedArrays.StaticEntry"><code>StaticEntry</code></a> for variable which represents a &quot;trait&quot;   which not changes overtime and only assigned once,   but may be added or deleted with &quot;mutation&quot; and &quot;extinction&quot;.</li></ul><p>The different entry types determine how the variable is recorded, and how the changes is accessed.</p><p>For example, a &quot;dynamic&quot; variable <span>$d$</span> firstly assigned to <span>$1$</span> at time <span>$t_1$</span> and changed to <span>$2$</span> at time <span>$t_2$</span>, thus the value of it is <span>$0$</span> for <span>$t &lt; t_1$</span>, <span>$1$</span> for <span>$t_1 \leq t &lt; t_2$</span>, and <span>$2$</span> for <span>$t_2 \leq t$</span>.</p><p>But, for a &quot;static&quot; variable <span>$s$</span> added with value <span>$1$</span> at time <span>$t_1$</span> and deleted at time <span>$t_2$</span>, the value of it is <span>$1$</span> for <span>$t_1 \leq t \leq t_2$</span>, and <span>$0$</span> for <span>$t \leq t_1$</span> or <span>$t_2 \leq t$</span>.</p><h2 id="Recorded-variable"><a class="docs-heading-anchor" href="#Recorded-variable">Recorded variable</a><a id="Recorded-variable-1"></a><a class="docs-heading-anchor-permalink" href="#Recorded-variable" title="Permalink"></a></h2><p>With a clock <code>c</code> and an entry type <code>E</code> recorded variables can be created by <a href="../references/#RecordedArrays.recorded"><code>recorded</code></a>:</p><pre><code class="language-julia hljs">recorded(E, c, 1) # create a recorded number
recorded(E, c, [1, 2, 3]) # create a recorded array</code></pre><p>For recorded arrays, most operation and functions for array, like linear algebra operation and broadcasting, works the same as normal <code>Array</code>. Besides, with the support of my another package <a href="https://github.com/wangl-cc/ResizingTools.jl"><code>ResizingTools</code></a>, recorded arrays can be resized by <code>resize!</code> at each dimensions. See its documentation for more details.</p><p>For recorded numbers, most operation for number works the same as normal <code>Number</code> as well. Besides, because a recorded number type is not a subtype of the specific number type, for example, <code>typeof(recorded(E, c, 1))</code> is not a subtype of <code>Int</code>, there are two function to test type of recorded number:</p><ul><li><a href="../references/#RecordedArrays.issubtype"><code>issubtype</code></a>: test if a recorded number type is a subtype of given normal number type,</li><li><a href="../references/#RecordedArrays.isnum"><code>isnum</code></a>: test if a recorded number type is the given type number type.</li></ul><p>For example, for a record number <code>n = recorded(E, c, 1)</code> <code>isnum(Integer, n)</code> and <code>issubtype(Integer, typeof(n))</code> return <code>true</code>, and <code>isnum(AbstractFloat, n)</code> and <code>issubtype(AbstractFloat, typeof(n))</code> return <code>false</code>.</p><p>If there are any commonly used functions were not implemented or there are any performance loss comparing to the normal number and array, leave me an issue or create a pull request on GitHub.</p><p>However, for custom functions. Warping recorded variables with <a href="../references/#RecordedArrays.state"><code>state</code></a> or convert it to a normal type by <code>convert</code> are common solution: like:</p><pre><code class="language-julia hljs">state(recorded(E, c, 1)) # warp a recorded number to a state
convert(Array, recorded(E, c, [1, 2, 3])) # convert a recorded array to an array</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>state</code> don&#39;t allocate but may be unsafe for matrix and higher dimension array because of <code>Base.unsafe_wrap</code> and <code>Base.unsafe_convert</code>. I&#39;m not sure if it would cause any problem or not. If anybody know more about it, please leave me an issue.</p></div></div><h2 id="Accessing-changes"><a class="docs-heading-anchor" href="#Accessing-changes">Accessing changes</a><a id="Accessing-changes-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-changes" title="Permalink"></a></h2><p>As shown above, the changes of recorded variables are stored in entries. To access the changes, use <a href="../references/#RecordedArrays.getentries"><code>getentries</code></a> to get the entries:</p><pre><code class="language-julia hljs">e = getentries(n) # get the entry of a recorded number n
es = getentries(A) # get entries of a recorded array A</code></pre><p>There are some methods to access the changes stored in entries:</p><ul><li><a href="../references/#RecordedArrays.getts"><code>getts</code></a> to get the time of each change,</li><li><a href="../references/#RecordedArrays.getvs"><code>getvs</code></a> to get the value of each change,</li><li><a href="../references/#RecordedArrays.tspan"><code>tspan</code></a> to get the time span of the entry,</li><li><a href="../references/#RecordedArrays.gettime"><code>gettime</code></a> to get the value at given time(s).</li></ul><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><p>There is a two user recipes for <code>Plots.jl</code>:</p><ul><li><code>timeseries</code> plots time series of given recorded variables,</li><li><code>phaseportrait</code> plots phase portrait of given recorded variables.</li></ul><p>Both of them accept arguments with there types:</p><ul><li>a recorded variable, like <code>timeseries(v)</code> where <code>v</code> is a recorded variable;</li><li>a collection of entries, like <code>timeseries(es)</code>, where <code>es</code> is a collection of entries;</li><li>multiple entries, like <code>timeseries(e1, e2)</code>, where <code>e1</code> and <code>e2</code> are entries.</li></ul><p>See example for more information.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../example/">Example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Tuesday 23 November 2021 11:37">Tuesday 23 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
